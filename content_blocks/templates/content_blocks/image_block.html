{% load i18n markup webdesign %}

{% if not content_mode %}<div{% if perms.content_blocks and editable %} class="image-block"{% endif %}>{% endif %}

{% if image_block.image_file %}
    {% block image %}
        {% if image_block.link %}
             <a href="{{ image_block.link }}">
        {% endif %}
        <img src="{{ image_block.image_file.url }}" alt="{{ image_block.alternate_text }}" />
        {% if image_block.link %}
             </a>
        {% endif %}
    {% endblock %}
{% else %}
    {% if DEBUG %}
        {# TODO display image placeholder or icon or something #}
        <span style="font-size:64px">&#9888;</span>
    {% endif %}
{% endif %}

{% if perms.content_blocks and editable %}
    <p><a href="{% if image_block %}{% url content_blocks_image_block_edit image_block.name %}{% else %}{% url content_blocks_image_block_edit name %}{% endif %}" class="image-block-edit">{% trans "Edit" %}</a></p>
{% endif %}

{% if not just_content %}</div>{% endif %}
